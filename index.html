<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <![endif]-->

    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>MPhone Landing Page</title>

    <meta name="description" content="MPhone Landing Page"/>
    <meta name="keywords" content="mphone, mobiphone, html5, css3, responsive, template, framework, landing"/>
    <meta name="author" content="Tripath Vietnam"/>

    <link rel="profile" href="http://gmpg.org/xfn/11">

    <link rel="apple-touch-icon" sizes="57x57" href="apple-touch-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="apple-touch-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="apple-touch-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="apple-touch-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="apple-touch-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="apple-touch-icon-144x144.png"/>

    <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16"/>
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32"/>
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96"/>

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">
    <link rel="stylesheet" href="vendors/bootstrap/css/bootstrap.min.css" type='text/css' media='all'/>
    <link rel="stylesheet" href="vendors/bootstrap/css/bootstrap-reboot.min.css" type='text/css' media='all'/>
    <link rel="stylesheet" href="vendors/aos/aos.css" type='text/css' media='all'/>
    <link rel="stylesheet" href="vendors/fullpagejs/fullpage.min.css" type='text/css' media='all'/>
    <link rel="stylesheet" href="build/css/styles.css" type='text/css' media='all'/>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.css' rel='stylesheet'/>

    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.49.0/mapbox-gl.js'></script>

    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js" integrity="sha384-kW+oWsYx3YpxvjtZjFXqazFpA7UP/MbiY4jvs+RWZo2+N94PFZ36T6TFkc9O3qoB" crossorigin="anonymous"></script>
</head>

<body class="mp-body">

<div class="mp-wrapper">

    <div id="page" class="hfeed site">

        <header id="masthead" class="site-header">

            <section class="mp-header-top">
                <!--leave-blank-->
            </section><!--header-top-->

            <section class="mp-header-main">
                <div class="container">
                    <div class="row">
                        <div class="col-12 text-center">
                            <figure class="mp-branding">
                                <a href="#"><img src="images/logo.png" alt="MPhone"></a>
                            </figure><!--branding-->
                        </div>
                    </div>
                </div>
            </section><!--header-main-->

            <section class="mp-header-bottom"><!--header-bottom-->
                <!--leave-blank-->
            </section>

        </header>
        <!--!site-header-->

        <section id="content" class="site-content">

            <div class="container-fluid mp-no-padding">
                <div class="row no-gutters">
                    <div class="col-12">
                        <section id="fullpage" class="mp-page-main">

                            <section id="mp-section-welcome" class="mp-section-welcome mp-block fp-auto-height-responsive section">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-12 text-center">
                                            <div class="mp-section-welcome__title">
                                                <h1 class="title">Smartphone được <br/> phân phối chính thức bởi MobiFone</h1>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section><!--welcome-boxes-->

                            <section id="mp-section-overview" class="mp-section-overview mp-block fp-auto-height-responsive section">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-12 text-center">

                                            <figure class="mp-section-overview__image" data-aos="fade-left" data-aos-once="true" data-aos-offset="300" data-aos-duration="850" data-aos-easing="ease-in-sine">
                                                <img src="images/jellyfish.png" alt="Overview">
                                            </figure>

                                            <ul class="mp-section-overview__group text-left">
                                                <li class="mp-section-overview__box text-left">
                                                    <h6 class="title">Kích thước</h6>
                                                    <p class="summary">5.99" HD+</p>
                                                </li>

                                                <li class="mp-section-overview__box active text-left">
                                                    <h6 class="title">Độ phân giải</h6>
                                                    <p class="summary">720 x 1440 pixels</p>
                                                </li>

                                                <li class="mp-section-overview__box text-left">
                                                    <h6 class="title">Công nghệ mới</h6>
                                                    <p class="summary">Màn hình cong 2.5D</p>
                                                </li>
                                            </ul>

                                        </div>
                                    </div>
                                </div>
                            </section><!--overview-boxes-->

                            <section id="mp-section-camera" class="mp-section-camera mp-block fp-auto-height-responsive section">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-12 text-center" style="z-index: 99" data-aos="fade-down" data-aos-once="true" data-aos-duration="850">
                                            <div class="mp-section-camera__title">
                                                <h1 class="title" style="font-size: 44px; line-height: 1.3;">Camera kép ở sau <br/>13MP và 5MP</h1>
                                            </div>
                                            <figure class="mp-section-camera__thumbnail" data-aos="fade-up" data-aos-once="true" data-aos-duration="850">
                                                <img src="images/camera-capture.png" alt="Camera">
                                            </figure>
                                            <div class="mp-section-camera__title" data-aos="fade-up" data-aos-once="true" data-aos-duration="1000">
                                                <h1 class="title" style="font-size: 32px">Camera trước 8MP</h1>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section><!--camera-block-->

                            <section id="mp-section-color" class="mp-section-color mp-block fp-auto-height-responsive section">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-12 text-center">

                                            <div class="tab-content" id="pills-tabContent">
                                                <div class="tab-pane fade show active" id="pills-black" role="tabpanel" aria-labelledby="pills-black-tab">
                                                    <figure class="mp-section-color__image">
                                                        <img src="images/color-img-1.jpg" alt="Color 1" data-aos="fade-right" data-aos-once="true" data-aos-delay="300" data-aos-duration="850" data-aos-easing="ease-in-sine">
                                                        <img src="images/color-img-2.jpg" alt="Color 2" data-aos="fade-up" data-aos-once="true" data-aos-delay="400" data-aos-duration="650" data-aos-easing="ease-in-sine">
                                                        <img src="images/color-img-3.jpg" alt="Color 3" data-aos="fade-left" data-aos-once="true" data-aos-delay="300" data-aos-duration="850" data-aos-easing="ease-in-sine">
                                                    </figure>
                                                </div>
                                                <div class="tab-pane fade" id="pills-blue" role="tabpanel" aria-labelledby="pills-blue-tab">
                                                    <figure class="mp-section-color__image">
                                                        <img src="images/color-img-blue.png" alt="Color 1">
                                                    </figure>
                                                </div>
                                            </div>

                                            <ul class="nav nav-pills mp-section-color__selection" id="pills-tab" role="tablist">
                                                <li class="nav-item">
                                                    <a class="nav-link active" id="pills-black-tab" data-toggle="pill" href="#pills-black" role="tab" aria-controls="pills-profile" aria-selected="false">Black</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link" id="pills-blue-tab" data-toggle="pill" href="#pills-blue" role="tab" aria-controls="pills-home" aria-selected="true">Blue</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </section><!--color-block-->

                            <section id="mp-section-design" class="mp-section-design mp-block fp-auto-height-responsive section">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-12 text-center">
                                            <div class="mp-section-design__title" data-aos="fade-right" data-aos-once="true" data-aos-offset="300" data-aos-duration="850" data-aos-easing="ease-in-sine">
                                                <h1 class="title">Smartphone siêu mỏng</h1>
                                            </div>
                                            <figure class="mp-section-design__image" data-aos="fade-left" data-aos-once="true" data-aos-offset="300" data-aos-duration="850" data-aos-easing="ease-in-sine">
                                                <img src="images/thick-img.png" alt="Design">
                                            </figure>
                                        </div>
                                    </div>
                                </div>
                            </section><!--design-block-->

                            <section id="mp-section-specs" class="mp-section-specs mp-block fp-auto-height-responsive section">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-12 col-lg-7">
                                            <figure class="mp-section-specs__image" data-aos="fade-up" data-aos-once="true" data-aos-offset="300" data-aos-duration="850" data-aos-easing="ease-in-sine">
                                                <img src="images/specs-img.jpg" alt="">
                                            </figure>
                                        </div>
                                        <div class="col-12 col-lg-5">
                                            <ul class="mp-section-specs__group">
                                                <li class="mp-section-specs__box" data-aos="fade-left" data-aos-once="true" data-aos-delay="300">
                                                    <h6 class="title">CPU</h6>
                                                    <p class="summary">Octa Core 1.5 GHz</p>
                                                </li>
                                                <li class="mp-section-specs__box" data-aos="fade-left" data-aos-once="true" data-aos-delay="450">
                                                    <h6 class="title">OS</h6>
                                                    <p class="summary">Android 8.1</p>
                                                </li>
                                                <li class="mp-section-specs__box" data-aos="fade-left" data-aos-once="true" data-aos-delay="600">
                                                    <h6 class="title">Memory</h6>
                                                    <p class="summary" style="margin-bottom: 5px;">RAM 4GB</p>
                                                    <p class="summary">ROM 32GB</p>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </section><!--specification-block-->

                            <section id="mp-section-store" class="mp-section-store mp-block fp-auto-height-responsive section">
                                <div class="container-fluid mp-no-padding">
                                    <div class="row no-gutters">

                                        <div class="col-12 text-center" style="margin-bottom: 33px">
                                            <h3 class="title">Các cửa hàng MobiFone cung cấp</h3>
                                        </div>

                                        <div class="col-12 col-lg-3">
                                            <div class='sidebar'>
                                                <div id='listings' class='listings'></div>
                                            </div>
                                        </div>
                                        <div class="col-12 col-lg-9 h-100">
                                            <div id="map" style="width: 100%; height: 550px;"></div>
                                            <script>
                                                if (!('remove' in Element.prototype)) {
                                                    Element.prototype.remove = function() {
                                                        if (this.parentNode) {
                                                            this.parentNode.removeChild(this);
                                                        }
                                                    };
                                                }

                                                mapboxgl.accessToken = 'pk.eyJ1IjoiZHR1eCIsImEiOiJjam1hMnA2c3owYncwM3FsaHB1OHV3NzBpIn0.Ljr5wiYSVkgzWzn88Yc_ow';

                                                let map = new mapboxgl.Map({
                                                    container: 'map',
                                                    style: 'mapbox://styles/mapbox/dark-v9',
                                                    center: [105.812459, 21.032458],
                                                    zoom: 14
                                                });

                                                let stores = {
                                                        "type": "FeatureCollection",
                                                        "features": [
                                                            {
                                                                "type": "Feature",
                                                                "geometry": {
                                                                    "type": "Point",
                                                                    "coordinates": [
                                                                        105.812459,
                                                                        21.032458
                                                                    ]
                                                                },
                                                                "properties": {
                                                                    "phoneFormatted": "(00) 000-0000",
                                                                    "phone": "000000000",
                                                                    "address": "Lotte Center",
                                                                    "city": "Số 54 Liễu Giai",
                                                                    "country": "Việt Nam",
                                                                    "postalCode": "100000",
                                                                    "district": "Ba Đình"
                                                                }
                                                            },
                                                            {
                                                                "type": "Feature",
                                                                "geometry": {
                                                                    "type": "Point",
                                                                    "coordinates": [
                                                                        105.815581,
                                                                        21.003663
                                                                    ]
                                                                },
                                                                "properties": {
                                                                    "phoneFormatted": "(00) 000-0000",
                                                                    "phone": "000000000",
                                                                    "address": "Royal City Vincom Mega Mall",
                                                                    "city": "Ngách 190/7, Khu đô thị Royal City",
                                                                    "country": "Việt Nam",
                                                                    "postalCode": "100000",
                                                                    "district": "Thanh Xuân"
                                                                }
                                                            },
                                                            {
                                                                "type": "Feature",
                                                                "geometry": {
                                                                    "type": "Point",
                                                                    "coordinates": [
                                                                        105.868081,
                                                                        20.995127
                                                                    ]
                                                                },
                                                                "properties": {
                                                                    "phoneFormatted": "(00) 000-0000",
                                                                    "phone": "000000000",
                                                                    "address": "Times City Vincom Mega Mall",
                                                                    "city": "458 Phố Minh Khai, Khu đô thị Times City",
                                                                    "country": "Việt Nam",
                                                                    "postalCode": "100000",
                                                                    "district": "Hai Bà Trưng"
                                                                }
                                                            },
                                                            {
                                                                "type": "Feature",
                                                                "geometry": {
                                                                    "type": "Point",
                                                                    "coordinates": [
                                                                        105.783806,
                                                                        21.017232
                                                                    ]
                                                                },
                                                                "properties": {
                                                                    "phoneFormatted": "(00) 000-0000",
                                                                    "phone": "000000000",
                                                                    "address": "Keangnam Landmark Tower 72",
                                                                    "city": "Phạm Hùng, Mễ Trì, Từ Liêm",
                                                                    "country": "Việt Nam",
                                                                    "postalCode": "100000",
                                                                    "district": "Từ Liêm"
                                                                }
                                                            },
                                                            {
                                                                "type": "Feature",
                                                                "geometry": {
                                                                    "type": "Point",
                                                                    "coordinates": [
                                                                        105.815131,
                                                                        21.016352
                                                                    ]
                                                                },
                                                                "properties": {
                                                                    "phoneFormatted": "(00) 000-0000",
                                                                    "phone": "000000000",
                                                                    "address": "VPBank Tower",
                                                                    "city": "89 Láng Hạ",
                                                                    "country": "Việt Nam",
                                                                    "postalCode": "100000",
                                                                    "district": "Đống Đa"
                                                                }
                                                            }
                                                        ]
                                                    };

                                                map.on('load', function(e) {
                                                    // Add the data to your map as a layer
                                                    map.addLayer({
                                                        id: 'locations',
                                                        type: 'symbol',
                                                        // Add a GeoJSON source containing place coordinates and information.
                                                        source: {
                                                            type: 'geojson',
                                                            data: stores
                                                        },
                                                        layout: {
                                                            'icon-image': 'restaurant-15',
                                                            'icon-allow-overlap': true,
                                                        }
                                                    });
                                                    buildLocationList(stores);
                                                });

                                                map.on('click', function(e) {
                                                    let features = map.queryRenderedFeatures(e.point, { layers: ['locations'] });
                                                    if (features.length) {
                                                        let clickedPoint = features[0];
                                                        flyToStore(clickedPoint);
                                                        createPopUp(clickedPoint);
                                                        let activeItem = document.getElementsByClassName('activeItem');
                                                        if (activeItem[0]) {
                                                            activeItem[0].classList.remove('activeItem');
                                                        }
                                                        let selectedFeature = clickedPoint.properties.address;
                                                        for (let i = 0; i < stores.features.length; i++) {
                                                            if (stores.features[i].properties.address === selectedFeature) {
                                                                selectedFeatureIndex = i;
                                                            }
                                                        }
                                                        let listing = document.getElementById('listing-' + selectedFeatureIndex);
                                                        listing.classList.add('activeItem');
                                                    }
                                                });

                                                function flyToStore(currentFeature) {
                                                    map.flyTo({
                                                        center: currentFeature.geometry.coordinates,
                                                        zoom: 15
                                                    });
                                                }

                                                function createPopUp(currentFeature) {
                                                    let popUps = document.getElementsByClassName('mapboxgl-popup');
                                                    if (popUps[0]) popUps[0].remove();

                                                    let popup = new mapboxgl.Popup({ closeOnClick: false })
                                                        .setLngLat(currentFeature.geometry.coordinates)
                                                        .setHTML('<h3>MobiFone Store</h3>' +
                                                            '<h4>' + currentFeature.properties.address + '</h4>')
                                                        .addTo(map);
                                                }

                                                function buildLocationList(data) {
                                                    for (i = 0; i < data.features.length; i++) {
                                                        let currentFeature = data.features[i];
                                                        let prop = currentFeature.properties;
                                                        let listings = document.getElementById('listings');
                                                        let listing = listings.appendChild(document.createElement('div'));
                                                        listing.className = 'item';
                                                        listing.id = 'listing-' + i;
                                                        let link = listing.appendChild(document.createElement('a'));
                                                        link.href = '#/';
                                                        link.className = 'title';
                                                        link.dataPosition = i;
                                                        link.innerHTML = prop.address;
                                                        let details = listing.appendChild(document.createElement('p'));
                                                        details.innerHTML = prop.city;
                                                        if (prop.phone) {
                                                            details.innerHTML += ' &middot; ' + prop.phoneFormatted;
                                                        }

                                                        link.addEventListener('click', function(e) {
                                                            let clickedListing = data.features[this.dataPosition];
                                                            flyToStore(clickedListing);
                                                            createPopUp(clickedListing);

                                                            let activeItem = document.getElementsByClassName('activeItem');

                                                            if (activeItem[0]) {
                                                                activeItem[0].classList.remove('activeItem');
                                                            }

                                                            this.parentNode.classList.add('activeItem');
                                                        });
                                                    }
                                                }

                                                stores.features.forEach(function(marker) {
                                                    let el = document.createElement('div');

                                                    el.className = 'marker';

                                                    new mapboxgl.Marker(el, { offset: [0, -23] })
                                                        .setLngLat(marker.geometry.coordinates)
                                                        .addTo(map);

                                                    el.addEventListener('click', function(e) {
                                                        let activeItem = document.getElementsByClassName('activeItem');

                                                        flyToStore(marker);

                                                        createPopUp(marker);

                                                        e.stopPropagation();

                                                        if (activeItem[0]) {
                                                            activeItem[0].classList.remove('activeItem');
                                                        }
                                                        let listing = document.getElementById('listing-' + i);
                                                        console.log(listing);
                                                        listing.classList.add('activeItem');
                                                    });
                                                });
                                            </script>
                                        </div>
                                    </div>
                                </div>
                            </section><!--store-block-->

                        </section>
                    </div>
                </div>
            </div>

        </section>
        <!--!site-content-->

        <footer id="colophon" class="site-footer">

        </footer>
        <!--!site-footer-->

    </div>
</div>

</body>
<script type="text/javascript" src="build/js/index.js"></script>